<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>葉彥妤的研究項目</title><style>
/* cspell:disable-file */
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	text-indent: -1.7em;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, YuMincho, "Yu Mincho", "Hiragino Mincho ProN", "Hiragino Mincho Pro", "Songti TC", "Songti SC", "SimSun", "Nanum Myeongjo", NanumMyeongjo, Batang, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC', 'Noto Sans CJK KR'; }

.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC', 'Noto Sans Mono CJK KR'; }

.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, YuMincho, "Yu Mincho", "Hiragino Mincho ProN", "Hiragino Mincho Pro", "Songti TC", "Songti SC", "SimSun", "Nanum Myeongjo", NanumMyeongjo, Batang, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC', 'Noto Sans CJK KR'; }

.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC', 'Noto Sans Mono CJK KR'; }

.highlight-default {
}
.highlight-gray {
	color: rgb(155,154,151);
}
.highlight-brown {
	color: rgb(100,71,58);
}
.highlight-orange {
	color: rgb(217,115,13);
}
.highlight-yellow {
	color: rgb(223,171,1);
}
.highlight-teal {
	color: rgb(15,123,108);
}
.highlight-blue {
	color: rgb(11,110,153);
}
.highlight-purple {
	color: rgb(105,64,165);
}
.highlight-pink {
	color: rgb(173,26,114);
}
.highlight-red {
	color: rgb(224,62,62);
}
.highlight-gray_background {
	background: rgb(235,236,237);
}
.highlight-brown_background {
	background: rgb(233,229,227);
}
.highlight-orange_background {
	background: rgb(250,235,221);
}
.highlight-yellow_background {
	background: rgb(251,243,219);
}
.highlight-teal_background {
	background: rgb(221,237,234);
}
.highlight-blue_background {
	background: rgb(221,235,241);
}
.highlight-purple_background {
	background: rgb(234,228,242);
}
.highlight-pink_background {
	background: rgb(244,223,235);
}
.highlight-red_background {
	background: rgb(251,228,228);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(55, 53, 47, 0.6);
	fill: rgba(55, 53, 47, 0.6);
}
.block-color-brown {
	color: rgb(100,71,58);
	fill: rgb(100,71,58);
}
.block-color-orange {
	color: rgb(217,115,13);
	fill: rgb(217,115,13);
}
.block-color-yellow {
	color: rgb(223,171,1);
	fill: rgb(223,171,1);
}
.block-color-teal {
	color: rgb(15,123,108);
	fill: rgb(15,123,108);
}
.block-color-blue {
	color: rgb(11,110,153);
	fill: rgb(11,110,153);
}
.block-color-purple {
	color: rgb(105,64,165);
	fill: rgb(105,64,165);
}
.block-color-pink {
	color: rgb(173,26,114);
	fill: rgb(173,26,114);
}
.block-color-red {
	color: rgb(224,62,62);
	fill: rgb(224,62,62);
}
.block-color-gray_background {
	background: rgb(235,236,237);
}
.block-color-brown_background {
	background: rgb(233,229,227);
}
.block-color-orange_background {
	background: rgb(250,235,221);
}
.block-color-yellow_background {
	background: rgb(251,243,219);
}
.block-color-teal_background {
	background: rgb(221,237,234);
}
.block-color-blue_background {
	background: rgb(221,235,241);
}
.block-color-purple_background {
	background: rgb(234,228,242);
}
.block-color-pink_background {
	background: rgb(244,223,235);
}
.block-color-red_background {
	background: rgb(251,228,228);
}
.select-value-color-default { background-color: rgba(206,205,202,0.5); }
.select-value-color-gray { background-color: rgba(155,154,151, 0.4); }
.select-value-color-brown { background-color: rgba(140,46,0,0.2); }
.select-value-color-orange { background-color: rgba(245,93,0,0.2); }
.select-value-color-yellow { background-color: rgba(233,168,0,0.2); }
.select-value-color-green { background-color: rgba(0,135,107,0.2); }
.select-value-color-blue { background-color: rgba(0,120,223,0.2); }
.select-value-color-purple { background-color: rgba(103,36,222,0.2); }
.select-value-color-pink { background-color: rgba(221,0,129,0.2); }
.select-value-color-red { background-color: rgba(255,0,26,0.2); }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="fb1d1b48-e6a3-428a-8b5e-ebd8f84deec2" class="page sans"><header><h1 class="page-title">葉彥妤的研究項目</h1><table class="properties"><tbody><tr class="property-row property-row-person"><th><span class="icon property-icon"><svg viewBox="0 0 14 14" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.4);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesPerson"><path d="M9.625,10.8465 C8.91187,10.2891 8.12088,9.926 7,9.26013 L7,8.71938 C7.21175,8.47612 7.392,8.176 7.53813,7.83213 C7.94587,7.7315 8.3125,7.33425 8.3125,7 C8.3125,6.51788 8.1095,6.32713 7.8715,6.17137 C7.8715,6.15562 7.875,6.14162 7.875,6.125 C7.875,5.41362 7.4375,3.5 5.25,3.5 C3.0625,3.5 2.625,5.4145 2.625,6.125 C2.625,6.14162 2.6285,6.15562 2.6285,6.17137 C2.3905,6.32713 2.1875,6.51788 2.1875,7 C2.1875,7.33425 2.55413,7.7315 2.96187,7.833 C3.108,8.176 3.28825,8.47612 3.5,8.71938 L3.5,9.26013 C2.37912,9.92513 1.58812,10.2882 0.875,10.8465 C0.041125,11.4984 0,12.4688 0,14 L10.5,14 C10.5,12.4688 10.4589,11.4984 9.625,10.8465 Z M13.125,7.3465 C12.4119,6.78912 11.6209,6.426 10.5,5.76013 L10.5,5.21938 C10.7118,4.97613 10.892,4.676 11.0381,4.33213 C11.4459,4.2315 11.8125,3.83425 11.8125,3.5 C11.8125,3.01787 11.6095,2.82713 11.3715,2.67138 C11.3715,2.65562 11.375,2.64162 11.375,2.625 C11.375,1.91363 10.9375,0 8.75,0 C6.5625,0 6.125,1.9145 6.125,2.625 C6.125,2.64162 6.1285,2.65562 6.1285,2.67138 C6.11188,2.68275 6.09787,2.69588 6.08125,2.70725 C7.83212,3.066 8.59688,4.54825 8.72813,5.74787 C8.97575,6.00863 9.1875,6.39625 9.1875,7 C9.1875,7.60288 8.771,8.20312 8.18388,8.51462 C8.127,8.624 8.06662,8.729 8.00275,8.82962 C8.155,8.91537 8.30025,8.99675 8.44025,9.07463 C9.08075,9.4325 9.63375,9.74137 10.164,10.1561 C10.3022,10.2638 10.4204,10.3801 10.5289,10.4991 L14,10.4991 C14,8.96875 13.9589,7.99837 13.125,7.3465 Z"></path></svg></span>Author</th><td><span class="user"><img src="https://lh5.googleusercontent.com/-CQ0BEB0JMpk/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucnitaoC2b-5c0zJejy5fLlfinAohw/photo.jpg" class="icon user-icon"/>08170893 08170893</span></td></tr><tr class="property-row property-row-created_time"><th><span class="icon property-icon"><svg viewBox="0 0 14 14" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.4);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesCreatedAt"><path d="M6.98643729,14.0000972 C5.19579566,14.0000972 3.40419152,13.3106896 2.04245843,11.9323606 C-0.681017475,9.21200555 -0.680780251,4.76029539 2.04293482,2.04012507 C4.76664406,-0.68004331 9.22427509,-0.68004331 11.9480135,2.04013479 C13.272481,3.36277455 14,5.1330091 14,6.99552762 C14,8.87640182 13.2721894,10.6285043 11.9480135,11.9509302 C10.5679344,13.3105924 8.77756503,14.0000972 6.98643729,14.0000972 Z M10.2705296,7.00913883 L10.2705296,8.46099754 L10.2705296,8.65543362 L10.076181,8.65543362 L8.6543739,8.65543362 L5.72059514,8.65543362 L5.52619796,8.65543362 L5.52619796,8.46099754 L5.52619796,5.52541044 L5.52619796,3.37946773 L5.52619796,3.18502193 L5.72059514,3.18502193 L7.17253164,3.18502193 L7.36692883,3.18502193 L7.36692883,3.37946773 L7.36692883,6.81467358 L10.076181,6.81467358 L10.2705296,6.81467358 L10.2705296,7.00913883 Z M12.1601539,6.99552762 C12.1601539,5.61697497 11.6190112,4.32597154 10.6393933,3.34769528 C8.63253764,1.34336744 5.35197452,1.34061603 3.34153136,3.33944106 C3.33868273,3.34219247 3.33607716,3.34494388 3.33322852,3.34769528 C1.32397148,5.35459953 1.32372842,8.63641682 3.33322852,10.6433794 C5.34295224,12.6504489 8.62968901,12.6504489 10.6393933,10.6433794 C11.6190112,9.66506426 12.1601539,8.37408027 12.1601539,6.99552762 Z"></path></svg></span>Created</th><td><time>@Jun 15, 2021 12:43 PM</time></td></tr><tr class="property-row property-row-multi_select"><th><span class="icon property-icon"><svg viewBox="0 0 14 14" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.4);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesMultipleSelect"><path d="M4,3 C4,2.447715 4.447715,2 5,2 L12,2 C12.5523,2 13,2.447716 13,3 C13,3.55228 12.5523,4 12,4 L5,4 C4.447715,4 4,3.55228 4,3 Z M4,7 C4,6.447715 4.447715,6 5,6 L12,6 C12.5523,6 13,6.447716 13,7 C13,7.55228 12.5523,8 12,8 L5,8 C4.447715,8 4,7.55228 4,7 Z M4,11 C4,10.447715 4.447715,10 5,10 L12,10 C12.5523,10 13,10.447716 13,11 C13,11.55228 12.5523,12 12,12 L5,12 C4.447715,12 4,11.55228 4,11 Z M2,4 C1.44771525,4 1,3.55228475 1,3 C1,2.44771525 1.44771525,2 2,2 C2.55228475,2 3,2.44771525 3,3 C3,3.55228475 2.55228475,4 2,4 Z M2,8 C1.44771525,8 1,7.55228475 1,7 C1,6.44771525 1.44771525,6 2,6 C2.55228475,6 3,6.44771525 3,7 C3,7.55228475 2.55228475,8 2,8 Z M2,12 C1.44771525,12 1,11.5522847 1,11 C1,10.4477153 1.44771525,10 2,10 C2.55228475,10 3,10.4477153 3,11 C3,11.5522847 2.55228475,12 2,12 Z"></path></svg></span>Tags</th><td><span class="selected-value select-value-color-default">other</span></td></tr></tbody></table></header><div class="page-body"><h1 id="4633107f-8358-41c7-9431-a7db7c5efe6f" class="block-color-yellow_background">葉彥妤的研究項目</h1><h2 id="0b95b1cd-4810-4735-8383-41c1835ef31e" class="block-color-brown_background">研究項目1</h2><h3 id="eee119f4-ff58-4f38-8cc3-a0178c7b721f" class="">說明</h3><p id="a76bbee4-ab6d-4f5e-ac9a-e4441fbd49d5" class="">選取縣市、鄉鎮市區查詢口罩數量</p><p id="67fdf876-1b00-4a5f-842d-9d21aa22aa36" class="">◾此項目能夠提供人們以位置來查詢口罩剩餘數量，可透過下拉式選單選取地址，將地址分段選取，如縣市、鄉鎮市區，來漸進式選取位置</p><h3 id="dc91e39a-f2b3-49e9-b647-88dd7ff0cbed" class="">資料說明</h3><p id="7b3debf9-e306-415f-9732-0b23c069ad6e" class="">為了讓選項方便呈現，特別製作了一份縣市與鄉鎮市區的RDS檔，以便縣市選項與鄉鎮市區選項連結</p><figure id="165b1cf8-0582-486d-a673-605e6ed2191c" class="image"><a href="%E8%91%89%E5%BD%A5%E5%A6%A4%E7%9A%84%E7%A0%94%E7%A9%B6%E9%A0%85%E7%9B%AE%20165b1cf80582486da673605e6ed2191c/_2021-06-07_8.14.40.png"><img style="width:396px" src="%E8%91%89%E5%BD%A5%E5%A6%A4%E7%9A%84%E7%A0%94%E7%A9%B6%E9%A0%85%E7%9B%AE%20165b1cf80582486da673605e6ed2191c/_2021-06-07_8.14.40.png"/></a></figure><h3 id="fe8f17e3-6cc1-436e-a95c-5478fa876bf0" class="">程式碼說明</h3><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="6c8ae902-2f23-44bc-8df2-029a51eeef53"><div style="font-size:1.5em"><span class="icon">❗</span></div><div style="width:100%">檔案與套件設置與其他雷同，在此不做贅述。</div></figure><p id="7861de25-4a9c-4d2a-93b1-fffac01cc531" class="block-color-blue">由於是即時資料，我們讀取資料需讀取網址，資料才能不斷的去做更新</p><pre id="804d1876-0950-4780-b272-1aa7bc32615c" class="code"><code>#讀取資料
data_fromapi&lt;-read_csv(&quot;https://data.nhi.gov.tw/resource/mask/maskdata.csv&quot;,col_type =cols(
  醫事機構代碼 = col_character(),
  醫事機構名稱 = col_character(),
  醫事機構地址 = col_character(),
  醫事機構電話 = col_character(),
  成人口罩剩餘數 = col_double(),
  兒童口罩剩餘數 = col_double(),
  來源資料時間 = col_character()
))
data2&lt;-read_csv(&quot;Institute_location (1).csv&quot;,col_type =cols(
  醫事機構代碼 = col_character(),
  x = col_character(),
  y = col_character()
))
data &lt;-readRDS(&quot;./country.RDS&quot;)

data_fromapi_api &lt;- left_join(data_fromapi, data2,by=&quot;醫事機構代碼&quot;)</code></pre><p id="2064fb32-5019-48e5-aae2-afb01cf4dfdb" class="block-color-blue">接著製作選項，由於檔案重複出現各縣市（如：臺北市、臺北市），為了使選項不要重複，我們利用unique去做整理，然後增加&#x27;&#x27;請選擇縣市&quot;與刪除沒有口罩資料的釣魚台</p><pre id="383d719d-0a4d-44a2-83bf-5290c3315993" class="code"><code>#整理資料
country &lt;-data %&gt;%
  select(Country) %&gt;%
  unique()%&gt;%
  add_row(Country=&quot;請選擇縣市&quot;, .before = 1)%&gt;%
  filter(Country != &quot;釣魚台&quot;)</code></pre><p id="c523d8e4-0d12-40f2-88b5-b3b07470d96e" class="block-color-blue">而在Sever端的部分，我們利用以下程式碼進行選擇縣市後選擇鄉鎮市區（如：選擇臺北市，則鄉鎮市區會顯示中正區、大同區...等</p><pre id="77ee42aa-8441-451e-9c9d-b0e47321f65d" class="code"><code>#選擇縣市，再選擇鄉鎮市區  
  observeEvent(input$Country,{
    x&lt;-data %&gt;%
      filter(Country == input$Country)%&gt;%
      select(Township)
    
    updateSelectInput(
      session = session,
      inputId = &quot;Township&quot;,
      label = &quot;選擇鄉鎮市區&quot;,
      choices =x
    )
  }
  
  )
rv &lt;- reactiveValues()
  
  observeEvent(input$Township, {
    stCountry &lt;- input$Country
    stTownship &lt;- input$Township
    
    if (stCountry != &quot;請選擇縣市&quot;) {
      stGp &lt;-
        filter(data_fromapi_api, substr(醫事機構地址, 1, 3) == stCountry)
      stGp &lt;-
        stGp[grep(pattern = stTownship, x = stGp$醫事機構地址),]
    } else {
      stGp &lt;- data_fromapi_api
    }
    # browser()
    rv$Township &lt;- stGp
  })</code></pre><p id="ffd7ed89-a13b-410e-a79a-99b8dcaa6ab4" class="block-color-blue">設定地圖選取目標後的地圖範位大小，假如選項在請選擇縣市，則顯現出台灣</p><pre id="f1ef5752-a3d9-4f36-8e51-777394a66eb5" class="code"><code>if (input$Country == &quot;請選擇縣市&quot;) {
      
      mapOut %&gt;% 
        setView(
          lng = 120.97388194444444,
          lat = 23.97565,
          zoom = 7
        )}
    else {
      
      minLng &lt;- min(rv$Township$x)
      minLat &lt;- min(rv$Township$y)
      maxLng &lt;- max(rv$Township$x)
      maxLat &lt;- max(rv$Township$y)
      
      if (minLng == maxLng &amp; minLat == maxLat) {
        
        mapOut %&gt;% setView(
          lng = minLng,
          lat = minLat,
          zoom = 17
        )}
      else {
        
        mapOut %&gt;% fitBounds(
          lng1 = minLng,
          lat1 = minLat,
          lng2 = maxLng,
          lat2 = maxLat
        )}}
  })</code></pre><h3 id="068ee62f-2b71-4556-97fd-63b34326dd3d" class="">結論</h3><p id="db9762b9-5be4-4ba2-b5b0-4349721073d5" class="">透過顯示的資訊我們可以清楚知道自己想了解的機構它的口罩剩餘量，進而選擇要去哪一家機構購買口罩，是一個方便大家在疫情期間所使用，保護好自己</p><h3 id="622b1fbb-d63d-44e8-9d1d-130d01dd5ed5" class="">成果畫面</h3><figure id="9b7259fb-de61-4805-894b-3447ef5ee89f" class="image"><a href="%E8%91%89%E5%BD%A5%E5%A6%A4%E7%9A%84%E7%A0%94%E7%A9%B6%E9%A0%85%E7%9B%AE%20165b1cf80582486da673605e6ed2191c/_2021-06-07_8.01.42.png"><img style="width:1306px" src="%E8%91%89%E5%BD%A5%E5%A6%A4%E7%9A%84%E7%A0%94%E7%A9%B6%E9%A0%85%E7%9B%AE%20165b1cf80582486da673605e6ed2191c/_2021-06-07_8.01.42.png"/></a></figure><h2 id="2c3feb31-3d70-421e-8cf4-9afdd54317d2" class="block-color-brown_background">研究項目2</h2><h3 id="c9cc64b8-803d-48d4-a52d-944c9807a061" class="">說明</h3><p id="ad6f21bd-02f3-4027-8b26-d86de14c416a" class="">藉由GPS定位了解附近口罩量</p><p id="10ad0d82-d712-4a89-9e24-194a45650fb8" class="">◾利用GPS定位，查看附近機構剩餘口罩量，依照不同口罩量，icon顏色也會隨之不同</p><h3 id="8a25e027-63a6-46d9-8a1a-fb1ac218329c" class="">程式碼說明</h3><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="f8272cad-adfa-4bd2-9622-b0e7188abaad"><div style="font-size:1.5em"><span class="icon">❗</span></div><div style="width:100%">檔案與套件設置與其他雷同，在此不做贅述</div></figure><p id="aef224f2-8368-44b0-a112-5f6a7a2c442d" class="">
</p><p id="b21c7964-24f5-4be8-99cc-1969abd9f7d2" class="block-color-blue">安裝leaflet.extras，才能使用GPS</p><pre id="ee5024aa-18c2-4077-a81a-7cf20565f61e" class="code"><code>library(leaflet.extras)</code></pre><p id="1683325b-5902-4825-8a69-8a54e357452d" class=""><mark class="highlight-blue">使用GPS定位</mark></p><pre id="c41b767d-3195-44f1-9d6e-6157d7bc3e79" class="code"><code>mapOut&lt;-leaflet(data_fromapi_api) %&gt;%addTiles() %&gt;%
      addControlGPS(options = gpsOptions(position = &quot;topleft&quot;, activate = TRUE, 
                                         autoCenter = TRUE, maxZoom = 16, 
                                         setView = TRUE)) %&gt;%
      addAwesomeMarkers( icon = icons,label=~lapply(info, shiny::HTML)
                       )
    </code></pre><p id="6b964bbd-8343-4e19-8308-791d1f0535cf" class="block-color-gray_background">由於GPS定位需要在網址安全的情況下使用，學校設定的發佈的網址不符合條件，就無法使用此功能</p><p id="d424f353-9cf5-4eb1-8e17-9cc3644ec7db" class="">
</p><h3 id="73ee9acf-3ec6-4835-ae97-1dcba3cfc185" class="">結論</h3><p id="f0300cc9-f99a-4f2b-a002-0c96c935b1cb" class="">透過GPS能夠及時找到附近口罩剩餘狀況，能夠即刻前往有口罩之所在地，以便民眾出門時使用</p><h3 id="ea1df563-9c4d-4464-bd4f-7bf88ec9247b" class="">成果畫面</h3><p id="1a259c56-40ec-41d6-acae-413972a0e657" class="">紅點就是定位位置</p><figure id="2817a89e-f38d-4a4b-b097-78e4d2711772" class="image"><a href="%E8%91%89%E5%BD%A5%E5%A6%A4%E7%9A%84%E7%A0%94%E7%A9%B6%E9%A0%85%E7%9B%AE%20165b1cf80582486da673605e6ed2191c/_2021-06-14_10.50.41.png"><img style="width:1826px" src="%E8%91%89%E5%BD%A5%E5%A6%A4%E7%9A%84%E7%A0%94%E7%A9%B6%E9%A0%85%E7%9B%AE%20165b1cf80582486da673605e6ed2191c/_2021-06-14_10.50.41.png"/></a></figure></div></article></body></html>